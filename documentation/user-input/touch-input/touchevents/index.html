<!DOCTYPE html>
<html>
  
<!-- Mirrored from developers.google.com/web/fundamentals/documentation/user-input/touch-input/touchevents/index by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 07 May 2014 09:56:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<title>Implement Custom Gestures — Google Web Fundamentals</title><meta name="author" content=""><meta name="description" content=""><link rel="icon" href="../../../../favicon.ico"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta id="viewport" name="viewport" content="width=device-width, initial-scale=1"><meta property="twitter:account_id" content="@chromium_dev"><link rel="publisher" href="https://plus.google.com/+MattGaunt"><meta itemprop="name" content="Implement Custom Gestures — Google Web Fundamentals"><meta itemprop="image" content="../../../../../../imgs/lono.html"><meta itemprop="description" content="Using touch events you can create custom interactions for your UI. The question is how can you do this efficiently, keeping your frame rate high and your users happy."><link rel="stylesheet" media="screen" href="../../../../css/styles.min.css"><body class="page--article article--touch-input theme--touch-input"><header id="gc-googlebar"><div class="container"><a id="gc-logo" href="http://developers.google.com/"><img src="http://developers.google.com/_static/0f4dd8c48e/images/developers-logo.svg" alt="Google"></a><p id="beta" class="beta"><i class="icon icon-cog"></i>This site is still a work in progress!<br><a href="https://github.com/Google/WebFundamentals/issues/new?title=Issue%20in:%20/documentation/user-input/touch-input/touchevents/index.html" target="_blank" target="_blank">Report an issue</a> or <a href="https://github.com/Google/WebFundamentals" target="_blank" target="_blank">view source</a>.</p></div></header><header class="main-header"><h1 class="main-header__title"><a href="https://developers.google.com/web/fundamentals" title="Web Essentials" title="Go to Web Fundamentals" class="main-header__logo">Web Fundamentals</a></h1><nav class="main-nav"><ul class="main-nav__list clear"><li class="main-nav__item main-nav__item--web-fundamentals main-nav__item--home"><a class="main-nav__link" href="../../../../index.html" title="Go to Web Fundamentals">Web Fundamentals <i class="main-nav__icon icon icon-chevron-right"></i></a></li><li class="main-nav__item main-nav__item--getting-started"><a class="main-nav__link" href="../../../../getting-started/your-first-multi-screen-site/index.html" title="Go to Getting Started">Getting Started <i class="main-nav__icon icon icon-chevron-right"></i></a></li><li class="main-nav__item main-nav__item--documentation"><a class="main-nav__link" href="../../../index.html" title="Go to Documentation">Documentation <i class="main-nav__icon icon icon-custom"></i></a><div class="main-nav__secondary-nav"><div class="main-nav__secondary-content"><div class="main-nav__link--explore-wrapper"><a href="../../../index.html" title="Explore The Documentation" class="main-nav__link main-nav__link--child main-nav__link--explore">Explore The Documentation <i class="main-nav__icon icon icon-chevron-right"></i></a></div><div class="clear"><ul class="main-nav__list--child g-medium--2 g-wide--2"><li class="main-nav__item--child nav-theme--multi-device-layouts"><a class="main-nav__link main-nav__link--child themed--hover" title="Go to Multi-Device Layouts" href="../../../multi-device-layouts/index.html"><span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-multi-device-layouts"></i></span> Multi-Device Layouts <i class="main-nav__icon icon icon-chevron-right"></i></a></li><li class="main-nav__item--child nav-theme--user-input"><a class="main-nav__link main-nav__link--child themed--hover" title="Go to Forms and User Input" href="../../index.html"><span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-user-input"></i></span> Forms and User Input <i class="main-nav__icon icon icon-chevron-right"></i></a></li><li class="main-nav__item--child nav-theme--introduction-to-media"><a class="main-nav__link main-nav__link--child themed--hover" title="Go to Images, Video and Audio" href="../../../introduction-to-media/index.html"><span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-introduction-to-media"></i></span> Images, Video and Audio <i class="main-nav__icon icon icon-chevron-right"></i></a></li><li class="main-nav__item--child nav-theme--performance"><a class="main-nav__link main-nav__link--child themed--hover" title="Go to Performance" href="../../../performance/index.html"><span class="main-nav__guide-icon icon-circle--nav themed--background"><i class="icon icon-performance"></i></span> Performance <i class="main-nav__icon icon icon-chevron-right"></i></a></li></ul></div></div></div></li><li class="main-nav__item main-nav__item--resources"><a class="main-nav__link" href="../../../../resources/index.html" title="Go to Resources">Resources <i class="main-nav__icon icon icon-chevron-right"></i></a></li></ul><button class="main-nav__btn btn--toggle-nav"><i class="icon icon-menu"></i></button></nav></header><div class="article-container"><div class="editorial-header"><div class="container"><div class="content"><nav class="breadcrumbs"><p><a href="../../../index-2.html" title="Documentation">Documentation</a> / <a href="../../index-2.html" title="Forms and User Input">Forms and User Input</a> / <a href="../index.html" title="Add Touch to Your Site">Add Touch to Your Site</a> /</p></nav><h1 class="tag editorial-header__title">Add Touch to Your Site</h1><h2 class="editorial-header__subtitle">Implement Custom Gestures</h2><p class="editorial-header__excerpt">If you have an idea for custom interactions and gestures for your site there are two topics to keep in mind, how do I support the range of mobile browsers and how do I keep my frame rate high. In this article we'll look at exactly this.</p></div></div></div><div class="container"><div class="content"><!-- TODO[MATTGAUNT] add related items --><!-- TODO[MATTGAUNT] add what's next --><div class="toc"><h3 class="toc__title">In this lesson</h3><ol class="toc__list list-anchor" id="toc"><li><a href="#respond-to-touch-input-using-events">Respond to Touch Input Using Events</a></li><li><a href="#fps-while-using-touch">60fps while Using Touch</a></li><li><a href="#control-scrolling-using-touch-actions">Control Scrolling using Touch Actions</a></li><li><a href="#reference">Reference</a></li></ol></div><h2 id="respond-to-touch-input-using-events">Respond to Touch Input Using Events</h2><p>Depending on what you would like to do with touch, you’re likely to fall into one of two camps:</p><ul><li>I want the user to interact with one particular element.</li><li>I want the user to interact with multiple elements at the same time.</li></ul><p>There are trade offs to be had with both.</p><p>If the user will only be able to interact with one element, you might want all touch events to be given to that one element, as long as the gesture initially started on the element itself. For example, moving a finger off the swipable element can still control the element.</p><p><img src="images/touch-document-level.gif" alt="Example GIF of touch on document"></p><p>If, however, you expect users to interact with multiple elements at the same time (using multi-touch), you should restrict the touch to the specific element.</p><p><img src="images/touch-element-level.gif" alt="Example GIF of touch on element"></p></div></div><div class="highlight-module highlight-module--left highlight-module--learning"><div class="highlight-module__container icon-star"><div class="highlight-module__content g-wide--push-1 g-wide--pull-1 g-medium--push-1"><p class="highlight-module__title">Key Takeaways</p><ul class="highlight-module__list"><li>For full device support, handle touch, mouse and MS Pointer Events.</li><li>Always bind start event listeners to the element itself.</li><li>If you want the user to interact with one particular element, bind your move and end listeners to the document in the touchstart method; ensure you unbind them from the document in the end listener.</li><li>If you want to support multi-touch, either restrict move and end touch events to the element itself or handle all the touches on an element.</li></ul></div></div></div><div class="container"><div class="content"><h3 id="add-event-listeners">Add Event Listeners</h3><p>Touch events and mouse events are implemented on most mobile browsers.</p><p>The event names you need to implement are <code>touchstart</code>, <code>touchmove</code>, <code>touchend</code> and <code>touchcancel</code>.</p><p>For some situations, you may find that you would like to support mouse interaction as well; which you can do with the mouse events: <code>mousedown</code>, <code>mousemove</code>, and <code>mouseup</code>.</p><p>For Windows Phone devices, you need to support Pointer Events which are a new set of events. Pointer Events merge mouse and touch events into one set of callbacks. This is currently only supported in Internet Explorer 10+ with the events <code>MSPointerDown</code>, <code>MSPointerMove</code>, and <code>MSPointerUp</code>.</p><p>Touch, mouse and Pointer Events are the building blocks for adding new gestures into your application (see <a href="#touch-mouse-and-ms-pointer-events">Touch, mouse and MS Pointer events</a>).</p><p>Include these events in the <code>addEventListener()</code> method, along with the event’s callback function and a boolean. The boolean determines whether you should catch the event before or after other elements have had the opportunity to catch and interpret the events (<code>true</code> means we want the event before other elements):</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="c1">// Check if pointer events are supported.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Add Pointer Event Listener</span>
      <span class="nx">swipeFrontElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerDown&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Add Touch Listener</span>
      <span class="nx">swipeFrontElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    
      <span class="c1">// Add Mouse Listener</span>
      <span class="nx">swipeFrontElement</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-1">View full sample</a></div></div><div class="container"><div class="content"><p>This code first checks to see if Pointer Events are supported by testing for <code>window.navigator.msPointerEnabled</code>. If they aren’t, we add listeners for touch and mouse events instead.</p><h3 id="handle-single-element-interaction">Handle Single-Element Interaction</h3><p>In the short snippet of code above you may have noticed that we only add the starting event listener, this is a conscious decision.</p><p>By adding the move and end event listeners once the gesture has started on the element itself, the browser can check if the touch occured in a region with a touch event listener and if it’s not, can handle it faster by not having to run any additional javascript.</p><p><img src="images/scroll-bottleneck.gif" alt="Illustrating Binding Touch Events to Document in touchstart"></p><p>The steps taken to implement this are:</p><ol><li>Add the start events listener to an element.</li><li>Inside your touch start method, bind the move and end elements to the document. The reason for binding the move and end events to the document is so that we receive all events regardless of whether they occur on the original element or not.</li><li>Handle the move events.</li><li>On the end event, remove the move and end listeners from the document.</li></ol><p>Below is a snippet of our <code>handleGestureStart</code> method which adds the move and end events to the document:</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="c1">// Handle the start of gestures</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">touches</span> <span class="o">&amp;&amp;</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">// Add the move and end listeners</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pointer events are supported.</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerMove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerUp&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Add Touch Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchcancel&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    
        <span class="c1">// Add Mouse Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousemove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span>
    
      <span class="nx">initialTouchPos</span> <span class="o">=</span> <span class="nx">getGesturePointFromEvent</span><span class="p">(</span><span class="nx">evt</span><span class="p">);</span>

      <span class="nx">swipeFrontElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="s1">&#39;initial&#39;</span><span class="p">;</span>
    <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-1">View full sample</a></div></div><div class="container"><div class="content"><p>The end callback we add is <code>handleGestureEnd</code> which removes the move and end events from the document when the gesture has finished:</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="c1">// Handle end gestures</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">touches</span> <span class="o">&amp;&amp;</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">isAnimating</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    
      <span class="c1">// Remove Event Listeners</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Remove Pointer Event Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerMove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerUp&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Remove Touch Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;touchcancel&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    
        <span class="c1">// Remove Mouse Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mousemove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span>
    
      <span class="nx">updateSwipeRestPosition</span><span class="p">();</span>
    <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-1">View full sample</a></div></div><div class="container"><div class="content"><p>Mouse events follow this same pattern since it’s easy for a user to accidentally move the mouse outside of the element, which results in the move events no longer firing. By adding the move event to the document, we&#8217;ll continue to get mouse movements regardless of where they are on the page.</p><p>You can use the <code>"Show potential scroll bottlenecks"</code> feature in Chrome DevTools to show how the touch events behave:</p><p><img class="g-medium--full g-wide--full" src="images/scroll-bottleneck-devtool.png" alt="Enable Scroll Bottleneck in DevTools"></p><div style="clear: both"></div><h3 id="handle-multi-element-interaction">Handle Multi-Element Interaction</h3><p>If you expect your users to use multiple elements at once, you can add the move and end events listeners directly to the elements themselves. This applies to touch only, for mouse interactions you should continue to apply the <code>mousemove</code> and <code>mouseup</code> listeners to the document.</p><p>Since we only wish to track touches on a particular element, we can add the move and end listeners for touch and pointer events to element straight away:</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="c1">// Check if pointer events are supported.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Add Pointer Event Listener</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerDown&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerMove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerUp&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// Add Touch Listeners</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchstart&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchcancel&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

      <span class="c1">// Add Mouse Listeners</span>
      <span class="nx">elementHold</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousedown&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">}</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-2">View full sample</a></div></div><div class="container"><div class="content"><p>In our <code>handleGestureStart</code> and <code>handleGestureEnd</code> function, we add and remove the mouse event listeners to the document.</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="c1">// Handle the start of gestures</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

              <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">getGesturePointFromEvent</span><span class="p">(</span><span class="nx">evt</span><span class="p">);</span>
      <span class="nx">initialYPos</span> <span class="o">=</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Add Mouse Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousemove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    
      <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">targetTouches</span> <span class="o">&amp;&amp;</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">targetTouches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Remove Mouse Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mousemove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">isAnimating</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">lastHolderPos</span> <span class="o">=</span> <span class="nx">lastHolderPos</span> <span class="o">+</span> <span class="o">-</span><span class="p">(</span><span class="nx">initialYPos</span> <span class="o">-</span> <span class="nx">lastYPos</span><span class="p">);</span>
    <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-2">View full sample</a></div></div><div class="container"><div class="content"><h2 id="fps-while-using-touch">60fps while Using Touch</h2><p>Now that we have the start and end events taken care of we can actually respond to the touch events.</p><h3 id="get-and-store-touch-event-coordinates">Get and Store Touch Event Coordinates</h3><p>For any of the start and move events, you can easily extract <code>x</code> and <code>y</code> from an event.</p><p>The following code snippet checks whether the event is from a touch event by looking for <code>targetTouches</code>, if it is then it extracts the <code>clientX</code> and <code>clientY</code> from the first touch. If the event is a mouse or pointer event then we extract <code>clientX</code> and <code>clientY</code> directly from the event itself.</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">getGesturePointFromEvent</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="p">{};</span>

        <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">targetTouches</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Prefer Touch Events</span>
          <span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">targetTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">clientX</span><span class="p">;</span>
          <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">targetTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">clientY</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="c1">// Either Mouse event or Pointer Event</span>
          <span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
          <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">point</span><span class="p">;</span>
      <span class="p">}</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-2">View full sample</a></div></div><div class="container"><div class="content"><p>Each touch event has three lists containing touch data (see also <a href="#touch-lists">Touch lists</a>):</p><ul><li><code>touches</code>: list of all current touches on the screen, regardless of DOM element they are on.</li><li><code>targetTouches</code>: list of touches currently on the DOM element the event is bound to.</li><li><code>changedTouches</code>: list of touches which changed resulting in the event being fired.</li></ul><p>In most cases, <code>targetTouches</code> gives you everything you need.</p><h3 id="request-animation-frame">Request Animation Frame</h3><p>Since the event callbacks are fired on the main thread, we want to run as little code as possible in the callback to keep our frame rate high, preventing jank.</p><p>Use <code>requestAnimationFrame</code> to change the UI in response to an event. This gives you an opportunity to update the UI when the browser is intending to draw a frame and will help you move some work out of your callback.</p><p>A typical implementation is to save the <code>x</code> and <code>y</code> coordinates from the start and move events and request an animation frame in the move event callback.</p><p>In our demo, we store the initial touch position in <code>handleGestureStart</code>:</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="c1">// Handle the start of gestures</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureStart</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">touches</span> <span class="o">&amp;&amp;</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="c1">// Add the move and end listeners</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">msPointerEnabled</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Pointer events are supported.</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerMove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;MSPointerUp&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// Add Touch Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchmove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchend&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;touchcancel&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    
        <span class="c1">// Add Mouse Listeners</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mousemove&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureMove</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;mouseup&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleGestureEnd</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span>
    
      <span class="nx">initialTouchPos</span> <span class="o">=</span> <span class="nx">getGesturePointFromEvent</span><span class="p">(</span><span class="nx">evt</span><span class="p">);</span>

      <span class="nx">swipeFrontElement</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="s1">&#39;initial&#39;</span><span class="p">;</span>
    <span class="p">}.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-1">View full sample</a></div></div><div class="container"><div class="content"><p>The <code>handleGestureMove</code> method stores the <code>y</code> position before requesting an animation frame if we need to, passing in our <code>onAnimFrame</code> function as the callback:</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">getGesturePointFromEvent</span><span class="p">(</span><span class="nx">evt</span><span class="p">);</span>
    <span class="nx">lastYPos</span> <span class="o">=</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    
      <span class="k">if</span><span class="p">(</span><span class="nx">isAnimating</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">isAnimating</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimFrame</span><span class="p">(</span><span class="nx">onAnimFrame</span><span class="p">);</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-2">View full sample</a></div></div><div class="container"><div class="content"><p>It’s in the <code>onAnimFrame</code> function that we change our UI to move the elements around. Initially we check to see if the gesture is still on-going to determine whether we should still animate or not, if so we use our initial and last y positions to calculate the new transform for our element.</p><p>Once we’ve set the transform, we set the <code>isAnimating</code> variable to <code>false</code> so the next touch event will request a new animation frame.</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">onAnimFrame</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">isAnimating</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
    
        <span class="kd">var</span> <span class="nx">newYTransform</span> <span class="o">=</span> <span class="nx">lastHolderPos</span> <span class="o">+</span> <span class="o">-</span><span class="p">(</span><span class="nx">initialYPos</span> <span class="o">-</span> <span class="nx">lastYPos</span><span class="p">);</span>
    
        <span class="nx">newYTransform</span> <span class="o">=</span> <span class="nx">limitValueToSlider</span><span class="p">(</span><span class="nx">newYTransform</span><span class="p">);</span>
    
        <span class="kd">var</span> <span class="nx">transformStyle</span> <span class="o">=</span> <span class="s1">&#39;translateY(&#39;</span><span class="o">+</span><span class="nx">newYTransform</span><span class="o">+</span><span class="s1">&#39;px)&#39;</span><span class="p">;</span>
        <span class="nx">elementHold</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">msTransform</span> <span class="o">=</span> <span class="nx">transformStyle</span><span class="p">;</span>
        <span class="nx">elementHold</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">MozTransform</span> <span class="o">=</span> <span class="nx">transformStyle</span><span class="p">;</span>
        <span class="nx">elementHold</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">webkitTransform</span> <span class="o">=</span> <span class="nx">transformStyle</span><span class="p">;</span>
        <span class="nx">elementHold</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="nx">transformStyle</span><span class="p">;</span>
    
        <span class="nx">isAnimating</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-2">View full sample</a></div></div><div class="container"><div class="content"><h2 id="control-scrolling-using-touch-actions">Control Scrolling using Touch Actions</h2><p>The CSS property <code>touch-action</code> allows you control scrolling behavior on touch. In our examples, we use <code>touch-action: none</code> to disable scrolling on touch.</p></div></div><div class="highlight-module highlight-module--code highlight-module--right"><div class="highlight-module__container"><code class="html"><div class="highlight"><pre>    <span class="c">/* Pass all touches to javascript */</span>
    <span class="nt">-ms-touch-action</span><span class="o">:</span> <span class="nt">none</span><span class="o">;</span>
    <span class="nt">touch-action</span><span class="o">:</span> <span class="nt">none</span><span class="o">;</span>
    
</pre></div></code> <a class="highlight-module__cta" href="https://google-developers.appspot.com/web/fundamentals/resources/samples/documentation/user-input/touch-input/touch-demo-1">View full sample</a></div></div><div class="container"><div class="content"><p>Below is a list of the available parameters for <em>touch-action</em>.</p><table class="table-2"><thead><tr><th>Property<th>Description<tbody><tr><td data-th="Property"><code>touch-action: auto</code><td data-th="Description">Scrolling works as normal, touching will scroll horizontally and vertically if the browser allows it.<tr><td data-th="Property"><code>touch-action: none</code><td data-th="Description">No scrolling allowed on touch.<tr><td data-th="Property"><code>touch-action: pan-x</code><td data-th="Description">Horizontal scrolling allowed; vertical scrolling disabled.<tr><td data-th="Property"><code>touch-action: pan-y</code><td data-th="Description">Vertical scrolling allowed; horizontal scrolling disabled.</table></div></div><div class="highlight-module highlight-module--right highlight-module--remember"><div class="highlight-module__container icon-exclamation"><div class="highlight-module__content g-wide--push-1 g-wide--pull-1 g-medium--pull-1"><p class="highlight-module__title">Remember</p><ul class="highlight-module__list"><li>Using <code>touch-action&colon; pan-x</code> or <code>touch-action&colon; pan-y</code> are great for being explicit in your intention that a user should only ever scroll vertically or horizontally on an element.</li></ul></div></div></div><div class="container"><div class="content"><h2 id="reference">Reference</h2><p>The definitive touch events reference can be found here: <a href="http://www.w3.org/TR/touch-events/">w3 Touch Events</a>.</p><h3 id="touch-mouse-and-ms-pointer-events">Touch, Mouse, and MS Pointer events</h3><p>These events are the building blocks for adding new gestures into your application:</p><table class="table-2"><thead><tr><th>Touch, Mouse, MS Pointer Events<th>Description<tbody><tr><td data-th="Event Names"><code>touchstart</code>, <code>mousedown</code>, <code>MSPointerDown</code><td data-th="Description">This is called when a finger first touches an element or when the user clicks down on the mouse.<tr><td data-th="Event Names"><code>touchmove</code>, <code>mousemove</code>, <code>MSPointerMove</code><td data-th="Description">This is called when the user moves their finger across the screen or drags with the mouse.<tr><td data-th="Event Names"><code>touchend</code>, <code>mouseup</code>, <code>MSPointerUp</code><td data-th="Description">This is called when the user lifts their finger off of the screen or releases the mouse.<tr><td data-th="Event Names"><code>touchcancel</code><td data-th="Description">This is called when the browser cancels the touch gestures.</table><h3 id="touch-lists">Touch Lists</h3><p>Each touch event includes three list attributes:</p><table class="table-2"><thead><tr><th>Attribute<th>Description<tbody><tr><td data-th="Attribute"><code>touches</code><td data-th="Description">List of all current touches on the screen, regardless of elements being touched.<tr><td data-th="Attribute"><code>targetTouches</code><td data-th="Description">List of touches that started on the element that is the target of the current event. For example, if you bind to a <code>&lt;button&gt;</code>, you'll only get touches currently on that button. If you bind to the document, you'll get all touches currently on the document.<tr><td data-th="Attribute"><code>changedTouches</code><td data-th="Description">List of touches which changed resulting in the event being fired:<ul><li>For the <code><a href="http://www.w3.org/TR/touch-events/#dfn-touchstart">touchstart</a></code> event-- list of the touch points that just became active with the current event.</li><li>For the <code><a href="http://www.w3.org/TR/touch-events/#dfn-touchmove">touchmove</a></code> event-- list of the touch points that have moved since the last event.</li><li>For the <code><a href="http://www.w3.org/TR/touch-events/#dfn-touchend">touchend</a></code> and <code><a href="http://www.w3.org/TR/touch-events/#dfn-touchcancel">touchcancel</a></code> events-- list of the touch points that have just been removed from the surface.</li></ul></table></div></div><div class="next-lessons container-medium themed--background" data-current-lesson="02"><h3><i class="icon icon-lessons"></i> Next Lessons</h3><ol class="list-lessons list-links"><li title="Stateful Elements Respond to Touch"><a href="../activestates/index.html">Stateful Elements Respond to Touch</a></li><li class="current" title="Implement Custom Gestures"><a href="index.html">Implement Custom Gestures <i class="icon icon-tick"></i></a></li></ol></div></div><!-- /.article-container --><div class="container clear"><div id="gc-content-license" class="gc-content-license g-wide--3 g-wide--last"><p>Except as otherwise noted, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>. For details, see our <a href="https://developers.google.com/site-policies">Site Policies</a>.</p></div></div><footer id="gc-footer"><div id="gc-copyright" class="container"><a href="http://developers.google.com/"><img id="developers-logo-footer" src="../../../../../../_static/0f4dd8c48e/images/developers-logo-footer.png" alt="Google Developers logo"></a><ul><li><a href="http://www.google.com/">Google</a></li><li><a href="http://developers.google.com/site-terms">Terms of Service</a></li><li><a href="http://www.google.com/intl/en/privacy/">Privacy Policy</a></li><li><a href="http://developers.google.com/careers">Careers</a></li></ul></div></footer><div class="grid-overlay clear"><div class="g-medium--1 g-wide--1"></div><div class="g-medium--1 g-wide--1"></div><div class="g-medium--1 g-medium--last g-wide--1"></div><div class="g-wide--1 g-wide--last"></div></div>
    <script type="text/javascript">
      (function(document) {
        var toggleDocumentationMenu = function() {
          var navBtn = document.querySelector('.main-nav__btn');
          var navList = document.querySelector('.main-nav__list');
          var navIsOpenedClass = 'nav-is-opened';
          var navListIsOpened = false;

          navBtn.addEventListener('click', function (event) {
            event.preventDefault();

            if (!navListIsOpened) {
              addClass(navList, navIsOpenedClass);
              navListIsOpened = true;
            } else {
              removeClass(navList, navIsOpenedClass);
              navListIsOpened = false;
            }
          });
        }

        var toggleMainNav = function() {
          var documentationItem =
              document.querySelector('.main-nav__item--documentation');
          var documentationLink =
              document.querySelector('.main-nav__item--documentation > .main-nav__link');
          var documentationIsOpenedClass = 'subnav-is-opened';
          var documentationIsOpened = false;

          documentationLink.addEventListener('click', function (event) {
            event.preventDefault();

            if (!documentationIsOpened) {
              documentationIsOpened = true;
              addClass(documentationItem, documentationIsOpenedClass);
            } else {
              documentationIsOpened = false;
              removeClass(documentationItem, documentationIsOpenedClass);
            }

          });
        }

        var isTouch = function() {
          return ('ontouchstart' in window) ||
            window.DocumentTouch && document instanceof DocumentTouch;
        };

        var addClass = function (element, className) {
          if (!element) { return; }
          element.className = element.className.replace(/\s+$/gi, '') + ' ' + className;
        }

        var removeClass = function(element, className) {
          if (!element) { return; }
          element.className = element.className.replace(className, '');
        }

        var html = document.querySelector('html');
        removeClass(html, 'no-js');
        addClass(html, 'js');

        if (isTouch()) {
          removeClass(html, 'no-touch');
          addClass(html, 'is-touch');
        }

        toggleDocumentationMenu();
        toggleMainNav();
      })(document);
    </script>
    <script>
    (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
    function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
    e=o.createElement(i);r=o.getElementsByTagName(i)[0];
    e.src='../../../../../../../www.google-analytics.com/analytics.js';
    r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
    ga('create','UA-24532603-1');ga('send','pageview');
    </script>
  </body>

<!-- Mirrored from developers.google.com/web/fundamentals/documentation/user-input/touch-input/touchevents/index by HTTrack Website Copier/3.x [XR&CO'2013], Wed, 07 May 2014 09:56:54 GMT -->
</html>
